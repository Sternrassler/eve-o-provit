{
    "swagger": "2.0",
    "info": {
        "description": "REST API for EVE Online trading, manufacturing and profit optimization\n\nFeatures:\n- Intra-region trading route calculation\n- Character skills and ship fitting integration\n- Deterministic cargo/warp speed calculations\n- Market data caching with staleness tracking\n- EVE SSO authentication",
        "title": "EVE-O-Provit API",
        "contact": {
            "name": "EVE-O-Provit Team",
            "url": "https://github.com/Sternrassler/eve-o-provit",
            "email": "support@example.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "0.1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api/v1",
    "paths": {
        "/characters/{characterId}/fitting/{shipTypeId}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Retrieve character's ship fitting with deterministic bonus calculations\nCalculates effective cargo capacity, warp speed with skills and modules\nUses EVE dogma engine with stacking penalties",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Fitting"
                ],
                "summary": "Get character ship fitting",
                "parameters": [
                    {
                        "type": "integer",
                        "example": 12345678,
                        "description": "Character ID",
                        "name": "characterId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "example": 650,
                        "description": "Ship Type ID",
                        "name": "shipTypeId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "boolean",
                        "default": false,
                        "description": "Force cache refresh",
                        "name": "refresh",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/CharacterFittingResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/characters/{characterId}/skills": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Retrieve character skills from ESI with Redis caching\nGraceful degradation: Returns default skills (level 0) if ESI fails",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Character"
                ],
                "summary": "Get character skills",
                "parameters": [
                    {
                        "type": "integer",
                        "example": 12345678,
                        "description": "Character ID",
                        "name": "characterId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/CharacterSkillsResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/health": {
            "get": {
                "description": "Check API and database health status",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Health"
                ],
                "summary": "Health check",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/HealthResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/items/search": {
            "get": {
                "description": "Search for EVE Online items by name (fuzzy matching)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Trading"
                ],
                "summary": "Search EVE items",
                "parameters": [
                    {
                        "minLength": 3,
                        "type": "string",
                        "description": "Search query (min 3 characters)",
                        "name": "q",
                        "in": "query",
                        "required": true
                    },
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "default": 20,
                        "description": "Maximum results (default 20, max 100)",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/ItemSearchResult"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/market/staleness/{region}": {
            "get": {
                "description": "Check how old the cached market data is for a region\nStatus: fresh (\u003c30min), stale (30-60min), very_stale (\u003e60min)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Market"
                ],
                "summary": "Get market data staleness",
                "parameters": [
                    {
                        "type": "integer",
                        "example": 10000002,
                        "description": "Region ID",
                        "name": "region",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/MarketDataStalenessResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/market/{region}/{type}": {
            "get": {
                "description": "Retrieve market orders for a specific item type in a region\nSupports optional refresh from ESI (cached for 5 minutes)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Market"
                ],
                "summary": "Get market orders",
                "parameters": [
                    {
                        "type": "integer",
                        "example": 10000002,
                        "description": "Region ID",
                        "name": "region",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "example": 34,
                        "description": "Type ID",
                        "name": "type",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "boolean",
                        "default": false,
                        "description": "Force refresh from ESI",
                        "name": "refresh",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/MarketOrderResponse"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/sde/regions": {
            "get": {
                "description": "Get list of all EVE Online regions from SDE",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "SDE"
                ],
                "summary": "List all EVE regions",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/RegionResponse"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/trading/routes/calculate": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Calculate optimal intra-region trading routes with profit analysis\nUses character skills and ship fitting for accurate cargo capacity\nSupports volume filtering for liquidity-based selection",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Trading"
                ],
                "summary": "Calculate trading routes",
                "parameters": [
                    {
                        "description": "Route calculation request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/TradingRouteRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/TradingRouteResponse"
                            }
                        }
                    },
                    "206": {
                        "description": "Partial results (timeout)",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/TradingRouteResponse"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/types/{id}": {
            "get": {
                "description": "Retrieve detailed information about an EVE Online item type from SDE",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "SDE"
                ],
                "summary": "Get item type information",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Type ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/TypeResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        },
        "/version": {
            "get": {
                "description": "Get API version information",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Health"
                ],
                "summary": "API version",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/VersionResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "CharacterFittingResponse": {
            "type": "object",
            "properties": {
                "applied_skills": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "Gallente Hauler V",
                        "Navigation V"
                    ]
                },
                "base_cargo_hold_m3": {
                    "type": "number",
                    "example": 2700
                },
                "base_fuel_bay_m3": {
                    "type": "number",
                    "example": 0
                },
                "base_warp_speed_au_s": {
                    "type": "number",
                    "example": 3
                },
                "cached_until": {
                    "type": "string",
                    "example": "2025-11-12T11:00:00Z"
                },
                "character_id": {
                    "type": "integer",
                    "example": 12345678
                },
                "effective_cargo_m3": {
                    "type": "number",
                    "example": 9656.9
                },
                "fitted_modules": {
                    "type": "integer",
                    "example": 5
                },
                "inertia_modifier": {
                    "type": "number",
                    "example": 1
                },
                "ship_name": {
                    "type": "string",
                    "example": "Nereus"
                },
                "ship_type_id": {
                    "type": "integer",
                    "example": 650
                },
                "warp_speed_au_s": {
                    "type": "number",
                    "example": 6.87
                }
            }
        },
        "CharacterSkill": {
            "type": "object",
            "properties": {
                "active_skill_level": {
                    "type": "integer",
                    "example": 5
                },
                "skill_id": {
                    "type": "integer",
                    "example": 3340
                },
                "skillpoints_in_skill": {
                    "type": "integer",
                    "example": 256000
                },
                "trained_skill_level": {
                    "type": "integer",
                    "example": 5
                }
            }
        },
        "CharacterSkillsResponse": {
            "type": "object",
            "properties": {
                "cached_until": {
                    "type": "string",
                    "example": "2025-11-12T11:00:00Z"
                },
                "character_id": {
                    "type": "integer",
                    "example": 12345678
                },
                "skills": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/CharacterSkill"
                    }
                },
                "total_sp": {
                    "type": "integer",
                    "example": 50000000
                },
                "unallocated_sp": {
                    "type": "integer",
                    "example": 0
                }
            }
        },
        "ErrorResponse": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 400
                },
                "error": {
                    "type": "string",
                    "example": "Invalid request"
                },
                "message": {
                    "type": "string",
                    "example": "Detailed error message"
                }
            }
        },
        "HealthResponse": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "string",
                    "example": "ok"
                },
                "timestamp": {
                    "type": "string",
                    "example": "2025-11-12T10:00:00Z"
                }
            }
        },
        "ItemSearchResult": {
            "type": "object",
            "properties": {
                "group_name": {
                    "type": "string",
                    "example": "Mineral"
                },
                "name": {
                    "type": "string",
                    "example": "Tritanium"
                },
                "type_id": {
                    "type": "integer",
                    "example": 34
                }
            }
        },
        "MarketDataStalenessResponse": {
            "type": "object",
            "properties": {
                "age_minutes": {
                    "type": "integer",
                    "example": 15
                },
                "last_update": {
                    "type": "string",
                    "example": "2025-11-12T10:00:00Z"
                },
                "refresh_allowed": {
                    "type": "boolean",
                    "example": true
                },
                "region_id": {
                    "type": "integer",
                    "example": 10000002
                },
                "region_name": {
                    "type": "string",
                    "example": "The Forge"
                },
                "status": {
                    "description": "fresh, stale, very_stale",
                    "type": "string",
                    "example": "fresh"
                }
            }
        },
        "MarketOrderResponse": {
            "type": "object",
            "properties": {
                "duration": {
                    "type": "integer",
                    "example": 90
                },
                "is_buy_order": {
                    "type": "boolean",
                    "example": false
                },
                "issued": {
                    "type": "string",
                    "example": "2025-11-12T10:00:00Z"
                },
                "location_id": {
                    "type": "integer",
                    "example": 60003760
                },
                "min_volume": {
                    "type": "integer",
                    "example": 1
                },
                "order_id": {
                    "type": "integer",
                    "example": 123456789
                },
                "price": {
                    "type": "number",
                    "example": 5.5
                },
                "range": {
                    "type": "string",
                    "example": "region"
                },
                "system_id": {
                    "type": "integer",
                    "example": 30000142
                },
                "type_id": {
                    "type": "integer",
                    "example": 34
                },
                "volume_remain": {
                    "type": "integer",
                    "example": 100000
                },
                "volume_total": {
                    "type": "integer",
                    "example": 100000
                }
            }
        },
        "RegionResponse": {
            "type": "object",
            "properties": {
                "region_id": {
                    "type": "integer",
                    "example": 10000002
                },
                "region_name": {
                    "type": "string",
                    "example": "The Forge"
                }
            }
        },
        "TradingRouteRequest": {
            "type": "object",
            "required": [
                "region_id",
                "type_ids"
            ],
            "properties": {
                "cargo_capacity": {
                    "type": "number",
                    "example": 9656.9
                },
                "character_id": {
                    "type": "integer",
                    "example": 12345678
                },
                "max_investment": {
                    "type": "number",
                    "example": 1000000000
                },
                "max_jumps": {
                    "type": "integer",
                    "example": 5
                },
                "region_id": {
                    "type": "integer",
                    "example": 10000002
                },
                "ship_type_id": {
                    "type": "integer",
                    "example": 650
                },
                "type_ids": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "type": "integer"
                    },
                    "example": [
                        34,
                        35,
                        36
                    ]
                }
            }
        },
        "TradingRouteResponse": {
            "type": "object",
            "properties": {
                "buy_location": {
                    "type": "string",
                    "example": "Jita IV - Moon 4 - Caldari Navy Assembly Plant"
                },
                "buy_price": {
                    "type": "number",
                    "example": 5.5
                },
                "investment": {
                    "type": "number",
                    "example": 550000
                },
                "jumps": {
                    "type": "integer",
                    "example": 5
                },
                "profit": {
                    "type": "number",
                    "example": 50000
                },
                "profit_per_jump": {
                    "type": "number",
                    "example": 10000
                },
                "quantity": {
                    "type": "integer",
                    "example": 100000
                },
                "revenue": {
                    "type": "number",
                    "example": 600000
                },
                "roi_percent": {
                    "type": "number",
                    "example": 9.09
                },
                "sell_location": {
                    "type": "string",
                    "example": "Amarr VIII (Oris) - Emperor Family Academy"
                },
                "sell_price": {
                    "type": "number",
                    "example": 6
                },
                "type_id": {
                    "type": "integer",
                    "example": 34
                },
                "type_name": {
                    "type": "string",
                    "example": "Tritanium"
                }
            }
        },
        "TypeResponse": {
            "type": "object",
            "properties": {
                "category_id": {
                    "type": "integer",
                    "example": 4
                },
                "group_id": {
                    "type": "integer",
                    "example": 18
                },
                "packaged_volume": {
                    "type": "number",
                    "example": 0.01
                },
                "type_id": {
                    "type": "integer",
                    "example": 34
                },
                "type_name": {
                    "type": "string",
                    "example": "Tritanium"
                },
                "volume": {
                    "type": "number",
                    "example": 0.01
                }
            }
        },
        "VersionResponse": {
            "type": "object",
            "properties": {
                "build_time": {
                    "type": "string",
                    "example": "2025-11-12T10:00:00Z"
                },
                "git_commit": {
                    "type": "string",
                    "example": "abc123def"
                },
                "version": {
                    "type": "string",
                    "example": "0.1.0"
                }
            }
        }
    },
    "securityDefinitions": {
        "BearerAuth": {
            "description": "EVE SSO Bearer Token. Format: \"Bearer {token}\"",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}